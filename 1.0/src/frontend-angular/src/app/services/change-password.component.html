<!-- frontend/src/app/modules/teacher/change-password/change-password.component.html -->
<div class="change-password-container">
    <h2>Alterar Senha</h2>

    <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
            <label for="currentPassword">Senha Atual</label>
            <input type="password" id="currentPassword" formControlName="currentPassword" class="form-control">
            <div *ngIf="changePasswordForm.get('currentPassword')?.invalid &&
                  (changePasswordForm.get('currentPassword')?.dirty || changePasswordForm.get('currentPassword')?.touched)"
                 class="error-message">
                Senha atual é obrigatória
            </div>
        </div>

        <div class="form-group">
            <label for="newPassword">Nova Senha</label>
            <input type="password" id="newPassword" formControlName="newPassword" class="form-control">
            <div *ngIf="changePasswordForm.get('newPassword')?.invalid &&
                  (changePasswordForm.get('newPassword')?.dirty || changePasswordForm.get('newPassword')?.touched)"
                 class="error-message">
                <div *ngIf="changePasswordForm.get('newPassword')?.errors?.['required']">
                    Nova senha é obrigatória
                </div>
                <div *ngIf="changePasswordForm.get('newPassword')?.errors?.['minlength']">
                    Mínimo de 6 caracteres
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="confirmNewPassword">Confirmar Nova Senha</label>
            <input type="password" id="confirmNewPassword" formControlName="confirmNewPassword" class="form-control">
            <div *ngIf="changePasswordForm.errors?.['mismatch'] &&
                  (changePasswordForm.get('confirmNewPassword')?.dirty || changePasswordForm.get('confirmNewPassword')?.touched)"
                 class="error-message">
                As senhas não coincidem
            </div>
        </div>

        <div *ngIf="errorMessage" class="alert alert-danger">
            {{ errorMessage }}
        </div>

        <div *ngIf="successMessage" class="alert alert-success">
            {{ successMessage }}
        </div>

        <button type="submit" class="btn btn-primary" [disabled]="!changePasswordForm.valid">
            Alterar Senha
        </button>
        <button type="button" class="btn btn-secondary ml-2" (click)="router.navigate(['/teacher/dashboard'])">
            Cancelar
        </button>
    </form>
</div>